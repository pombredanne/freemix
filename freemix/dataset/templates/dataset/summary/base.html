{% extends "dataset/base.html" %}

{% load i18n %}
{% load freemix_helpers %}
{% load compress %}

{% block freemix_title %}{% blocktrans %}Data Profile{% endblocktrans %}: {{ object.title }}{% endblock %}


{% block freemix_meta %}
    {{ block.super }}
    <link rel="freemix/dataprofile" href="{% url dataset_profile_json owner=object.owner.username slug=object.slug %}"/>
    <link rel="exhibit/data" href="{% url dataset_data_json owner=object.owner.username slug=object.slug %}"/>
{% endblock %}

{% block freemix_css %}
{{ block.super }}
{% compress css %}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/layout.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/views.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}freemix/css/editor.css"/>
{% endcompress %}
<link rel="stylesheet" type="text/css" href="http://api.simile.zepheira.com/exhibit/2.2.0/extensions/chart/chart-extension-bundle.css" />
{% endblock %}

{% block freemix_js%}
    <script type="text/javascript" src="http://api.simile.zepheira.com/exhibit/2.2.0/exhibit-api.js?autoCreate=false"></script>

    {{block.super}}
    {% include "freemix/js_include/viewer.html" %}
    {% compress js %}
    <script type="text/javascript" src="{{STATIC_URL}}freemix/js/lib/jquery.uuid.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}freemix/js/freemix.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}freemix/js/exhibit.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}freemix/js/property.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}freemix/js/identify.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}dataset/js/summary.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}exhibit/js/new_exhibit_dialog.js"></script>

    {% endcompress %}
{% endblock %}


{% block body %}

<div id="contents" class="ui-helper-hidden">
  <div id="identify" class="ui-helper-clearfix">

      
    <div class="dataset_list_item {% if object.published %}public{% else %}private{% endif %}">
      <div class="dataset-title">{{ object.title }}</div>
      <div class="dataset-description">{{ object.description }}</div>
      <div class="dataset-visibility">
          {% if object.published %}
            <span class="public">This dataset is publicly available.</span>
          {% else %}
            <span class="private">This dataset is private.</span>
          {% endif %}

      </div>
        {% with object.exhibits.count as view_count %}
        {% ifnotequal view_count 0 %}
            <p><a href="{% url exhibits_by_dataset owner=object.owner.username slug=object.slug %}">{% trans "There are" %} {{ view_count }} {% trans "data views" %}</a> {%  trans  "based on this data profile." %}</p>
        {% endifnotequal %}
        {% endwith %}
        <a href="{% url dataset_detail owner=object.owner.username slug=object.slug %}">{% trans "See More Details..." %}</a>
    </div>

    <h2>{% trans "Data Profile" %}</h2>
      <div class="priority-area">

          {% if can_edit %}
            <a href="{% url dataset_edit owner=object.owner.username slug=object.slug %}" class="button_link">{% trans "Edit" %}</a>
          {% endif %}

      </div>
    <table id="identify-table" class="property-list-table">
      <thead class="facet-header ui-widget-header">
        <tr>
          <th>
        <div>
          {% trans  "Enabled" %}
        </div>
          </th>
          <th>
        <div>
              {% trans "Field Name" %}
        </div>
          </th>
          <th>
        <div>
              {% trans "Types"%}
        </div>
          </th>
          <th>
        <div>
              {% trans "Value" %}
                <span class="record-pager">
                    <button class="left-record-button" title="Previous Record">{% trans "Previous Record" %}</button>
                    <button class="right-record-button" title="Next Record">{% trans "Next Record" %}</button>
                </span>

        </div>
          </th>
        </tr>
      </thead>
      <tbody>

        <tr class='table-footer'>
          <td colspan="3"></td>
          <td>
            <div class="record-controls ui-helper-clearfix ui-widget-header ui-corner-bottom">
              <span id="record-selector">
                  <span class="record-pager">
                    <button class="left-record-button" title="Previous Record">{% trans "Previous Record" %}</button>
                    <button class="right-record-button" title="Next Record">{% trans "Next Record" %}</button>
                  </span>
                  <span id="current-record">#p</span> of <span id="record-count">#t</span>&#160;
              </span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
</div>


<div class="ui-helper-hidden">
  <div id="templates">
  </div>
</div>
{% endblock %}
