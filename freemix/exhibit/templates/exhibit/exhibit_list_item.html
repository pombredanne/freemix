{% load i18n %}
{% load freemix_helpers %}

<li class="exhibit_list_item result_set_item clearfix {% if exhibit.published %}public{% else %}private{% endif %}">

    {% if not visible %}
        <div class="exhibit-title">{{exhibit.title}}</div>

        <div class="exhibit-left">
            {% blocktrans %}The dataset is no longer available.{% endblocktrans %}
        </div>
        {% if request.user.is_authenticated and request.user.username == exhibit.owner.username %}
        <div class="exhibit-right">

          <div class="exhibit-links">
            <span class="action action_edit_exhibit">
              <a class="exhibit_delete" href="{{  exhibit.get_absolute_url }}">{% trans "Delete" %}</a>
            </span>
          </div>
        </div>
        {% endif %}
    {%  else %}
    <div class="exhibit-title"><a href="{{  exhibit.get_absolute_url }}">{{exhibit.title}}</a></div>
    
    {% if exhibit.description %}
    {% ifnotequal exhibit.description exhibit.description|truncatewords:20 %}
    <div class="exhibit-description exhibit-short-description">
      {{ exhibit.description|safe|truncatewords:20 }}
      <a class="readmore" href="{{ exhibit.get_absolute_url }}">read more</a>
    </div>
    <div class="exhibit-description exhibit-long-description ui-helper-hidden">
      {{ exhibit.description|safe }}
    </div>
    {%  else %}
    <div class="exhibit-description">
      {{ exhibit.description|safe }}
    </div>
    {% endifnotequal %}
       {% endif %}
    <div class="exhibit-left">
        <div class="exhibit-creator">
                <span class="property-label">{% trans "Created by:"%} </span> <a href="{% url profile_detail exhibit.owner.username %}">{{exhibit.owner|nicename}}</a>
        </div>
        <div class="exhibit-created-data"><span class="property-label">{% trans "Created on:"%} </span>{{exhibit.created|date:"N j, Y"}}</div>
        <div class="exhibit-modified-data"><span class="property-label">{% trans "Last Modified:"%} </span>{{exhibit.modified|date:"N j, Y"}}</div>
        <div class="exhibit-dataset-title"><a href="{{exhibit.dataset.get_absolute_url }}" title="{{exhibit.dataset.title}}">{% blocktrans %}Original data set{% endblocktrans %}</a></div>

    </div>

    {% if request.user.is_authenticated and request.user.username == exhibit.owner.username %}

    <div class="exhibit-right">

      <div class="exhibit-links">

        {% if can_inspect %}
        <span class="action action_inspect_exhibit">
          <a class="exhibit_inspect" href="{% url exhibit_detail owner=exhibit.owner.username slug=exhibit.slug %}">{% trans "Inspect" %}</a>
        </span>
	{% endif %}

        {% if can_edit %}
        <span class="divider">|</span>

        <span class="action action_edit_exhibit">
          <a class="exhibit_edit" href="{% url exhibit_edit owner=exhibit.owner.username slug=exhibit.slug %}">{% trans "Edit" %}</a>
        </span>
	{% endif %}

        {% if can_delete %}
        <span class="divider">|</span>

        <span class="action action_edit_exhibit">
          <a class="exhibit_delete" href="{{  exhibit.get_absolute_url }}">{% trans "Delete" %}</a>
        </span>
	{% endif %}

      </div>
    </div>

    {% endif %}
    {% endif %}
</li>
